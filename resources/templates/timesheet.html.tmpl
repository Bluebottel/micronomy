<html>
  <head>
    <link rel="stylesheet" href="/styles/micronomy.css">
    <title>micronomy @ B3</title>
    <script src='/script/jquery-3.4.1.slim.min.js'></script>
    <script src='/script/nav.js'></script>
  </head>
  <body>
    <h1>micronomy @ B3</h1>
    <?.error><div class='error'>Error: <.error></div>
    </?><h2>
      <.card.employeenamevar>,
        vecka <.week>,
          <.state>
    </h2>

    <form class="arrows" action="/" method="POST">
      <input type="hidden" name="date" value="<.previous>">
      <input id="prevWk" type="submit" name="submit" value="&lt;">
    </form>
    <form class="arrows" action="/" method="POST">
      <input type="text" size="8" name="date" value="<.card.datevar>">
      <input id="selectedWk" type="submit" name="submit" value="välj">
    </form>
    <form class="arrows" action="/" method="POST">
      <input id="currentWk" type="submit" name="submit" value="idag">
    </form>
    <form class="arrows" action="/" method="POST">
      <input type="hidden" name="date" value="<.next>">
      <input id="nextWk" type="submit" name="submit" value="&gt;">
    </form>

    <div class="dates">
      <@dates: $day>
        <span class="box"><$day></span>
      </@>
    </div>

    <form action="/" method="POST">
      <input type="hidden" name="concurrency" value="<.meta.concurrencyControl>" />
      <input type="hidden" name="date" value="<.card.datevar>" />
      <@rows>
        <div class="row">
          <div class="title"><.title></div>
          <input type="hidden" name="concurrency-<.number>" value="<.concurrency>" />
          <@days: $day>
            <input type="hidden" name="hidden-<.number>-<$day.number>" value="<$day.hours>" />
            <span class="box"><input class="hours" type="text" name="hours-<.number>-<$day.number>" value="<$day.hours>" <$day.disabled>/></span>
          </@>
          <span class="box"><.weektotal></span>
          <&HTML(.status)>
        </div>
      </@>
      <input class="submit" type="submit" value="Spara" />
    </form>

    <div class="total">
      <div class="title">Totalt</div>
      <@total: $hours>
        <span class="box"><$hours></span>
      </@>
      <span class="box"><.card.totalnumberofweekvar></span>
    </div>

    <div class="fixed">
      <div class="title">Förväntat</div>
      <@fixed: $hours>
        <span class="box"><$hours></span>
      </@>
      <span class="box"><.card.fixednumberweekvar></span>
    </div>

    <div class="overtime">
      <div class="title">Saldo</div>
      <@overtime: $hours>
        <span class="box"><$hours></span>
      </@>
      <span class="box"><.card.overtimenumberweekvar></span>
    </div>

    <div class="invoiceable">
      <div class="title">Fakturerbart</div>
      <@invoiceable: $hours>
        <span class="box"><$hours></span>
      </@>
      <span class="box"><.card.invoiceabletimedayweekvar></span>
    </div>

    <form class="submit" action="/submit" method="POST">
      <input type="hidden" name="concurrency" value="<.meta.concurrencyControl>" />
      <input type="hidden" name="date" value="<.card.datevar>" />
      Ändringsorsak: <input class="reason" type="text" name="reason" />
      <input class="submit" type="submit" value="Avlämna" />
    </form>

    <form class="logout" action="/logout" method="POST">
      <input type="hidden" name="username" value="" />
      <input class="submit" type="submit" value="Logga ut" />
    </form>

    <p>Please <a href="https://github.com/krakan/micronomy/issues">report bugs</a>!</p>
  </body>
</html>
